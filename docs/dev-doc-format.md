# Development Document Format

Development documents are YAML files that describe what OH MY BRAIN should build. They can be created manually or generated by any AI assistant.

## Document Structure

```yaml
project:
  name: "Project Name"
  version: "0.1.0"
  description: "Project description"
  tech_stack:
    language: "Python"
    framework: "FastAPI"
    database: "PostgreSQL"
    other:
      - "Redis"
      - "Docker"

modules:
  - id: "mod-xxx"
    name: "Module Name"
    description: "What this module does"
    priority: 1
    dependencies: []
    acceptance_criteria: "How to verify completion"

    sub_tasks:
      - id: "task-xxx"
        name: "Task Name"
        type: "feature"
        description: "Detailed description"
        estimated_minutes: 30
        files_involved:
          - "src/file.py"
        requirements: |
          Detailed requirements...
```

## Project Section

| Field | Required | Description |
|-------|----------|-------------|
| `name` | Yes | Project name |
| `version` | No | Version string |
| `description` | Yes | What the project does |
| `tech_stack` | No | Languages, frameworks, etc. |

## Modules Section

Modules group related tasks together and can depend on each other.

| Field | Required | Description |
|-------|----------|-------------|
| `id` | Yes | Unique identifier (e.g., `mod-auth`) |
| `name` | Yes | Human-readable name |
| `description` | No | What this module provides |
| `priority` | No | 1-5, lower = higher priority |
| `dependencies` | No | List of module IDs that must complete first |
| `acceptance_criteria` | No | How to verify module completion |
| `sub_tasks` | Yes | List of tasks in this module |

## Tasks Section

Tasks are the atomic units of work assigned to Workers.

| Field | Required | Description |
|-------|----------|-------------|
| `id` | Yes | Unique identifier (e.g., `task-001`) |
| `name` | Yes | Short name |
| `type` | Yes | `feature`, `bugfix`, `refactor`, `test`, `docs` |
| `description` | Yes | What needs to be done |
| `estimated_minutes` | No | Time estimate (5-120) |
| `files_involved` | No | List of files to create/modify |
| `requirements` | Yes | Detailed requirements |
| `preferred_model` | No | Override AI model for this task |

## Task Types

| Type | Description | Recommended Model |
|------|-------------|-------------------|
| `feature` | New functionality | DeepSeek/GPT-4 |
| `bugfix` | Fix existing issues | DeepSeek Coder |
| `refactor` | Improve code structure | Claude Sonnet |
| `test` | Write tests | DeepSeek Coder |
| `docs` | Documentation | DeepSeek/GPT-4 |
| `review` | Code review | Claude Sonnet |

## Example: Todo App

```yaml
project:
  name: "Todo API"
  version: "0.1.0"
  description: "A simple REST API for managing todo items"
  tech_stack:
    language: "Python"
    framework: "FastAPI"
    database: "SQLite"

modules:
  - id: "mod-models"
    name: "Data Models"
    priority: 1
    dependencies: []
    acceptance_criteria: "Database models defined and migrations work"

    sub_tasks:
      - id: "task-001"
        name: "Create Todo model"
        type: "feature"
        description: "Define SQLAlchemy model for Todo items"
        estimated_minutes: 15
        files_involved:
          - "src/models/todo.py"
          - "src/models/__init__.py"
        requirements: |
          - Todo model with fields: id, title, completed, created_at
          - Use SQLAlchemy ORM
          - Include proper type hints

  - id: "mod-api"
    name: "REST API"
    priority: 2
    dependencies:
      - "mod-models"
    acceptance_criteria: "All CRUD endpoints working"

    sub_tasks:
      - id: "task-002"
        name: "Create CRUD endpoints"
        type: "feature"
        description: "Implement todo CRUD operations"
        estimated_minutes: 30
        files_involved:
          - "src/api/todos.py"
        requirements: |
          - GET /todos - List all todos
          - POST /todos - Create todo
          - GET /todos/{id} - Get single todo
          - PUT /todos/{id} - Update todo
          - DELETE /todos/{id} - Delete todo

      - id: "task-003"
        name: "Add validation"
        type: "feature"
        description: "Add Pydantic schemas for request validation"
        estimated_minutes: 20
        files_involved:
          - "src/schemas/todo.py"
        requirements: |
          - TodoCreate schema
          - TodoUpdate schema
          - TodoResponse schema
```

## Generating Documents with AI

You can use any AI assistant to generate development documents:

**Prompt example:**
```
Create an OH MY BRAIN development document for a [project description].
Use this YAML format:
[paste template here]

Break down the project into modules and tasks. Each task should be:
- Small enough to complete in 30-60 minutes
- Have clear requirements
- List the files that will be created or modified
```

## Validation

Validate your document before running:

```bash
oh-my-brain doc validate my_project.yaml
```

## Dry Run

See the execution plan without running:

```bash
oh-my-brain doc run my_project.yaml --dry-run
```
