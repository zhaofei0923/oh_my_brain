# Brain服务器配置示例
# 复制此文件为 brain.yaml 并根据需要修改

# 服务器绑定设置
host: "127.0.0.1"
port: 5555

# 传输协议 (auto, ipc, tcp)
# auto: 自动选择 - Linux/macOS使用ipc，Windows使用tcp
# ipc: Unix域套接字 (仅Linux/macOS)
# tcp: TCP连接 (所有平台)
transport: "auto"

# Redis配置 (可选，用于上下文持久化)
redis:
  enabled: true
  url: "redis://localhost:6379"
  # 或者分别配置
  # host: "localhost"
  # port: 6379
  # db: 0
  # password: null

# 上下文管理
context:
  # 最大token数 (超过此数量会自动压缩)
  max_tokens: 100000
  # 使用的分词器 (cl100k_base 用于 GPT-4/Claude)
  tokenizer: "cl100k_base"
  # 自动压缩阈值 (达到max_tokens的百分比时触发)
  compression_threshold: 0.8

# 任务调度
scheduler:
  # 调度策略: round_robin, least_loaded, capability_match
  strategy: "capability_match"
  # 任务超时时间（秒）
  task_timeout: 3600
  # 最大重试次数
  max_retries: 3
  # 重试延迟（秒）
  retry_delay: 30

# Worker管理
workers:
  # 心跳间隔（秒）
  heartbeat_interval: 10
  # 心跳超时（秒）- 超过此时间未收到心跳认为Worker离线
  heartbeat_timeout: 30
  # 最大Worker数量
  max_workers: 10

# 安全检查
safety:
  enabled: true
  # 额外的危险命令模式 (正则表达式)
  dangerous_patterns:
    - 'rm\s+-rf\s+/'
    - 'sudo\s+'
  # 额外的受保护路径
  protected_paths:
    - "/etc"
    - "/var"

# Git管理
git:
  enabled: true
  base_branch: "develop"
  branch_prefix: "agent/"
  auto_commit: true
  auto_push: false

# Dashboard (Web界面)
dashboard:
  enabled: true
  host: "127.0.0.1"
  port: 8080

# 日志设置
logging:
  level: "INFO"  # DEBUG, INFO, WARNING, ERROR
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
  file: null  # 日志文件路径，null表示只输出到控制台
